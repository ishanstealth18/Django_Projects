<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Expense</title>

    <style>
    .title {
            background-color: yellow;
            color: green;
            border: 2px solid black;
            text-align: center;
        }

        .edit_expense_body {
            text-align: center;
        }

        input[type=submit] {
        background-color: #d35400;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        }

        table, th, td {
            border:2px solid black;
            align: center;
        }

        .center {
            margin-left: auto;
            margin-right: auto;
        }

        .form-popup {
            display: none;
            position: fixed;
            bottom: 0;
            right: 5px;
            border: 3px solid #f1f1f1;

        }

        .form-container {
            max-width: 300px;
            padding: 10px;
            background-color: white;
        }

    </style>
</head>
<body>
    <div class="title">
        <h1>Expense Tracker</h1>
    </div>
    <div class="edit_expense_body">
        <br>
        <br>

        <a href="home.html">
            <button>Back to Home Page</button>
        </a>

        <h1>Enter From Date and To Date below:</h1>
        <form method="POST" action="">
            {% csrf_token %}
            <b>{{ edit_expense_form.as_table }}</b>
            <input type="submit" name="Submit"><br><br>
        </form>
    </div>

    <form method="POST">
        {% csrf_token %}
        <table class="center">
            <tr>
                <th>Action</th>
                <th>Expense Id</th>
                <th>Expense Category</th>
                <th>Expense Amount</th>
                <th>Expense Date</th>
            </tr>

            {% for item in all_data  %}
                <tr id="expense_record_id_{{ item.forloop.counter0 }}">
                    <td><input type="button" name="select_record" value="Edit Record" onclick="open_edit_expense_form('{{ item.0 }}')"></td>
                    {% for val in item  %}
                    <td id="expense_data_{{ item.0 }}_{{ val }}" >{{ val }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </form>

    <div class="form-popup" id="edit_expense_form">
        <form method="POST"  class="form-container">
            {% csrf_token %}
            <b><label>Expense Id:</label></b><br>
            <label id="expense_id_current_value"></label><br>
            <input type="text" name="expense_id" id="expense_id"><br>

            <b><label for="expense_category">Expense Category:</label></b><br>
            <input type="text" name="expense_category"><br>

            <b><label for="expense_amount">Expense Amount:</label></b><br>
            <input type="text" name="expense_amount"><br>
            <b><label for="expense_date">Expense Date:</label></b><br>
            <input type="text" name="expense_date"><br>
        </form>
    </div>

    <script>

        function open_edit_expense_form(r_id) {
            let expense_record_id = document.getElementsByName("r_id").id;
            document.getElementById("expense_id_current_value").innerHTML = expense_record_id;
            document.getElementById("edit_expense_form").style.display = "block";
        }

    </script>

</body>
</html>